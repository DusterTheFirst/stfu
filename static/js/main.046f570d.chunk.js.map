{"version":3,"sources":["components/Error.tsx","components/LazyAnimateImage.tsx","components/Loading.tsx","constants.ts","utils.ts","routes/Channel.tsx","routes/Guild.tsx","App.tsx","serviceWorker.ts","style.ts","index.tsx"],"names":["ErrorScreen","refetch","error","onClick","JSON","stringify","undefined","LazyAnimateImage","source","rest","useState","hover","setHover","alt","src","onMouseEnter","bind","onMouseLeave","LoadingScreen","LoadingIcon","BACKEND_GRAPHQL_URL","DISCORD_CDN","getGuildIcon","guild","should_animate","icon","id","startsWith","GET_CHANNEL","gql","MUTE_ALL","UNMUTE_ALL","Channel","useParams","guild_id","channel_id","useQuery","notifyOnNetworkStatusChange","pollInterval","variables","loading","data","useMutation","muteAll","unmuteAll","refetch_no_await","catch","e","console","channel","voiceChannel","ChannelInfo","to","name","position","canOperate","toString","userLimit","states","length","map","s","i","key","style","color","member","fontWeight","discriminator","nick","avatar","parseInt","getAvatar","mute","deaf","selfMute","selfDeaf","GET_GUILD","Guild","GuildInfo","voice_channels","useMemo","Array","from","voiceChannels","reduce","x","arr","get","category","push","set","Map","entries","sort","a","b","owner","vcs","vc","j","join","App","path","exact","type","value","Boolean","window","location","hostname","match","GlobalStyle","createGlobalStyle","CLIENT","ApolloClient","cache","InMemoryCache","uri","ReactDOM","render","StrictMode","client","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","message"],"mappings":"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","file":"static/js/main.046f570d.chunk.js","sourcesContent":["import { ApolloError } from \"@apollo/client\";\nimport React from \"react\";\n\n/** The props sent to the error screen */\ninterface IErrorScreenProps {\n    /** Function to trigger a refetch */\n    refetch(): void;\n    /** The error that caused this screen */\n    error: ApolloError;\n}\n\n/** A full screen error */\nexport default function ErrorScreen({refetch, error}: IErrorScreenProps) {\n    // if (error.networkError?.message = ) {\n    //     return (\n    //         <div>\n    //             <h1>Network Error :(</h1>\n    //             <p>Make sure you are connected to the internet</p>\n    //             <p>If the issue persists, the backend may be offline</p>\n    //             <button onClick={refetch_no_await}>Retry</button>\n    //         </div>\n    //     );\n    // } else {\n    return (\n        <div>\n            <h1>Error :(</h1>\n            <button onClick={refetch}>Retry</button>\n            <pre>{JSON.stringify(error, undefined, 4)}</pre>\n        </div>\n    );\n    // }\n}","import React, { useState } from \"react\";\n\n/** the props for the `LazyAnimateImage` components */\ninterface IProps extends React.DetailedHTMLProps<React.ImgHTMLAttributes<HTMLImageElement>, HTMLImageElement> {\n    /** The callback to compute the source of the image */\n    source(hover: boolean): string;\n}\n\n/** A helper component to only animate images on hover */\nexport default function LazyAnimateImage({ source, ...rest }: IProps) {\n    const [hover, setHover] = useState(false);\n\n    return <img {...rest} alt={rest.alt} src={source(hover)} onMouseEnter={setHover.bind(setHover, true)} onMouseLeave={setHover.bind(setHover, false)} />;\n}","import React from \"react\";\n\n/** The props for the loading screen */\ninterface ILoadingScreenProps {\n    /** A way to refresh the query */\n    refetch(): void;\n}\n\n/** A loading screen component */\nexport function LoadingScreen({ refetch }: ILoadingScreenProps) {\n    return (\n        <div>\n            <h1>Loading...</h1>\n            <button onClick={refetch}>Retry</button>\n        </div>\n    );\n}\n\n/** A standalone, unobtrusive loading icon */\nexport function LoadingIcon() {\n    // TODO:\n    return (<b>Loading...</b>);\n}","/** Ia true if the app is in production mode */\nexport const IS_PROD = process.env.NODE_ENV === \"production\";\n\n/** Is true if the backend uses https */\nexport const IS_HTTPS = IS_PROD;\n/** The backend domain */\nexport const BACKEND_DOMAIN = IS_PROD ? \"stfu-backend.dusterthefirst.com\" : \"localhost:8000\";\n/** The backend graphql url */\nexport const BACKEND_GRAPHQL_URL = `http${IS_HTTPS ? \"s\" : \"\"}://${BACKEND_DOMAIN}/graphql`;\n\n/** The CDN for accessing images or content from discord */\nexport const DISCORD_CDN = \"https://cdn.discordapp.com/\";","import { DISCORD_CDN } from \"./constants\";\n\n/** A stripped down, barebones member for the gatAvatar function */\ninterface ISimpleMember {\n    /** The user id */\n    id: string;\n    /** The user avatar */\n    avatar: string | null;\n    /** The user discriminator */\n    discriminator: string;\n}\n\n/** Get the avatar for a user given their  */\nexport function getAvatar(member: ISimpleMember, should_animate = true): string {\n    if (member.avatar === null) {\n        return `${DISCORD_CDN}embed/avatars/${parseInt(member.discriminator, 10) % 5}.png`;\n    } else {\n        return `${DISCORD_CDN}avatars/${member.id}/${member.avatar}.${member.avatar?.startsWith(\"a_\") && should_animate ? \"gif\" : \"webp\"}`;\n    }\n}\n\n/** A stripped down, bare bones guild for the getGuildIcon function */\ninterface ISimpleGuild {\n    /** The id of the guild */\n    id: string;\n    /** The icon of the guild */\n    icon: string | null;\n}\n\n/** Get the icon for a guild */\nexport function getGuildIcon(guild: ISimpleGuild, should_animate = true): string | undefined {\n    if (guild.icon === null) {\n        return undefined;\n    } else {\n        return `${DISCORD_CDN}icons/${guild.id}/${guild.icon}.${guild.icon.startsWith(\"a_\") && should_animate ? \"gif\" : \"webp\"}`;\n    }\n}","import { FetchResult, gql, useMutation, useQuery } from \"@apollo/client\";\nimport React from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport ErrorScreen from \"../components/Error\";\nimport LazyAnimateImage from \"../components/LazyAnimateImage\";\nimport { LoadingIcon, LoadingScreen } from \"../components/Loading\";\nimport { getAvatar } from \"../utils\";\nimport { GetChannel, GetChannelVariables, GetChannel_guild, GetChannel_guild_voiceChannel } from \"./__generated__/GetChannel\";\nimport { MuteAll, MuteAllVariables } from \"./__generated__/MuteAll\";\nimport { UnmuteAll, UnmuteAllVariables } from \"./__generated__/UnmuteAll\";\n\n/** The graphql query to get the specific channel */\nconst GET_CHANNEL = gql`\n    query GetChannel($guild_id: String!, $channel_id: String!) {\n        guild(id: $guild_id) {\n            name\n            id\n            voiceChannel(id: $channel_id) {\n                canOperate\n                category {\n                    id\n                    name\n                    position\n                }\n                id\n                name\n                position\n                states {\n                    channelId\n                    deaf\n                    mute\n                    selfDeaf\n                    selfMute\n                    id\n                    member {\n                        avatar\n                        bot\n                        color\n                        discriminator\n                        id\n                        joinedAt\n                        mute\n                        name\n                        nick\n                    }\n                }\n                userLimit\n            }\n        }\n    }\n`;\n\n/** The graphql query to mute all in a channel */\nconst MUTE_ALL = gql`\n    mutation MuteAll($channel_id: String!, $guild_id: String!) {\n        mute(channelId: $channel_id, guildId: $guild_id)\n    }\n`;\n\n/** The graphql query to unmute all in a channel */\nconst UNMUTE_ALL = gql`\n    mutation UnmuteAll($channel_id: String!, $guild_id: String!) {\n        unmute(channelId: $channel_id, guildId: $guild_id)\n    }\n`;\n\n/** The parameters for the channel */\ninterface IParams {\n    /** The parent guild's id */\n    guild_id: string;\n    /** The channel id to view */\n    channel_id: string;\n}\n\n/** The voice channel view */\nexport default function Channel() {\n    const { guild_id, channel_id } = useParams<IParams>();\n    const { loading, error, data, refetch } = useQuery<GetChannel, GetChannelVariables>(\n        GET_CHANNEL,\n        {\n            notifyOnNetworkStatusChange: true,\n            pollInterval: 15000,\n            variables: {\n                channel_id,\n                guild_id,\n            },\n        }\n    );\n    const [muteAll] = useMutation<MuteAll, MuteAllVariables>(MUTE_ALL, {\n        notifyOnNetworkStatusChange: true,\n        variables: {\n            channel_id,\n            guild_id\n        }\n    });\n    const [unmuteAll] = useMutation<UnmuteAll, UnmuteAllVariables>(UNMUTE_ALL, {\n        notifyOnNetworkStatusChange: true,\n        variables: {\n            channel_id,\n            guild_id\n        }\n    });\n\n    const refetch_no_await = () => { refetch().catch((e) => console.error(e)); };\n\n    if (loading && data === undefined) {\n        return (\n            <LoadingScreen refetch={refetch_no_await} />\n        );\n    } else if (error !== undefined) {\n        return (\n            <ErrorScreen error={error} refetch={refetch_no_await} />\n        );\n    } else {\n        // Safety: I can guarantee, at this state that data is not null since it is only allowed to be null if there is an error, which would be caught\n        // tslint:disable-next-line:no-non-null-assertion\n        const guild = data!.guild;\n\n        if (guild === null) {\n            return (\n                <div>\n                    <h1>The guild with id {guild_id} does not exist or is not available to the bot</h1>\n                </div>\n            );\n        }\n\n        const channel = guild.voiceChannel;\n\n        if (channel === null) {\n            return (\n                <div>\n                    <h1>The channel with id {channel_id} does not exist, is not a voice channel, or is not available to the bot</h1>\n                </div>\n            );\n        }\n\n        return (\n            <>\n                {loading ? <LoadingIcon /> : undefined}\n                <ChannelInfo guild={guild} channel={channel} refetch={refetch_no_await} muteAll={muteAll} unmuteAll={unmuteAll} />\n                <pre>\n                    {JSON.stringify(data, undefined, 4)}\n                </pre>\n            </>\n        );\n    }\n}\n\n/** The props for the GuildInfo component */\ninterface IChannelInfoProps {\n    /** The guild to view */\n    guild: GetChannel_guild;\n    /** The voice channel to view */\n    channel: GetChannel_guild_voiceChannel;\n    /** The refresh function to query a refresh */\n    refetch(): void;\n    /** The mute all function to unmute all */\n    muteAll(): Promise<FetchResult<MuteAll>>;\n    /** The unmute all function to unmute all */\n    unmuteAll(): Promise<FetchResult<UnmuteAll>>;\n}\n\n/** The information on a specific channel */\nfunction ChannelInfo({ guild, channel, refetch, muteAll, unmuteAll }: IChannelInfoProps) {\n    return (\n        <div>\n            <div>/ <Link to=\"/\">Home</Link> / <Link to={`/${guild.id}`}>{guild.name}</Link> / {channel.name} </div>\n            <button onClick={refetch}>Refresh</button>\n\n            <div>\n                <button onClick={muteAll.bind(muteAll)}>Mute</button>\n                <button onClick={unmuteAll.bind(unmuteAll)}>Unmute</button>\n            </div>\n            <table>\n                <thead>\n                    <tr>\n                        <th>Name</th>\n                        <th>Position</th>\n                        <th>Can operate</th>\n                        <th>User Limit</th>\n                        <th>User Count</th>\n                        <th>Users</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr>\n                        <td>{channel.name}</td>\n                        <td>{channel.position}</td>\n                        <td>{channel.canOperate.toString()}</td>\n                        <td>{channel.userLimit}</td>\n                        <td>{channel.states.length}</td>\n                        <td>\n                            <table>\n                                <thead>\n                                    <tr>\n                                        <th>Name</th>\n                                        <th>Avatar</th>\n                                        <th>Id</th>\n                                        <th>Server Mute</th>\n                                        <th>Server Deaf</th>\n                                        <th>Self Mute</th>\n                                        <th>Self Deaf</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {channel.states.map((s, i) => {\n                                        const source = (hover: boolean) => `${getAvatar(s.member, hover)}?size=64`;\n\n                                        return (\n                                            <tr key={i}>\n                                                <td style={{ color: `#${s.member.color === null ? \"000000\" : s.member.color.toString(16)}`, fontWeight: \"bold\" }}>{s.member.name}#{s.member.discriminator}{s.member.nick === null ? undefined : ` (${s.member.nick})`}</td>\n                                                <td><LazyAnimateImage source={source} alt={`${s.member.name}'s avatar`} /></td>\n                                                <td>{s.member.id}</td>\n                                                <td>{s.mute.toString()}</td>\n                                                <td>{s.deaf.toString()}</td>\n                                                <td>{s.selfMute.toString()}</td>\n                                                <td>{s.selfDeaf.toString()}</td>\n                                            </tr>\n                                        );\n                                    })}\n                                </tbody>\n                            </table>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div >\n    );\n}","import { gql, useQuery } from \"@apollo/client\";\nimport React, { useMemo } from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport ErrorScreen from \"../components/Error\";\nimport { LoadingIcon, LoadingScreen } from \"../components/Loading\";\nimport { getGuildIcon } from \"../utils\";\nimport {\n    GetGuild, GetGuildVariables, GetGuild_guild, GetGuild_guild_voiceChannels as VoiceChannel, GetGuild_guild_voiceChannels_category as ChannelCategory\n} from \"./__generated__/GetGuild\";\n\n/** The graphql query to get information about the specific guild */\nconst GET_GUILD = gql`\n    query GetGuild($guild_id: String!) {\n        guild(id: $guild_id) {\n            name,\n            id,\n            icon\n            banner\n            owner {\n                id\n                name\n                avatar\n                color\n                nick\n                discriminator\n            }\n            unavailable\n            voiceChannels {\n                canOperate\n                category {\n                    id\n                    name\n                    position\n                }\n                id\n                name\n                position\n                states {\n                    deaf\n                    id\n                    channelId\n                    member {\n                        id\n                        name\n                        avatar\n                        color\n                        nick\n                        discriminator\n                    }\n                    mute\n                }\n                userLimit\n            }\n        }\n    }\n`;\n\n/** The parameters for the guild url */\ninterface IParams {\n    /** The guild id to view */\n    guild_id: string;\n}\n\n/** The page for guild information */\nexport default function Guild() {\n    const { guild_id } = useParams<IParams>();\n    const { loading, error, data, refetch } = useQuery<GetGuild, GetGuildVariables>(GET_GUILD, { variables: { guild_id }, notifyOnNetworkStatusChange: true });\n    const refetch_no_await = () => { refetch().catch((e) => console.error(e)); };\n\n    if (loading && data === undefined) {\n        return (\n            <LoadingScreen refetch={refetch_no_await} />\n        );\n    } else if (error !== undefined) {\n        return (\n            <ErrorScreen error={error} refetch={refetch_no_await} />\n        );\n    } else {\n        // Safety: I can guarantee, at this state that data is not null since it is only allowed to be null if there is an error, which would be caught\n        // tslint:disable-next-line:no-non-null-assertion\n        const guild = data!.guild;\n\n        if (guild === null) {\n            return (\n                <div>\n                    <h1>The guild with id {guild_id} does not exist or is not available to the bot</h1>\n                </div>\n            );\n        }\n\n        return (\n            <>\n                {loading ? <LoadingIcon /> : undefined}\n                <GuildInfo guild={guild} refetch={refetch_no_await} />\n                <pre>\n                    {JSON.stringify(data, undefined, 4)}\n                </pre>\n            </>\n        );\n    }\n}\n\n/** The props for the GuildInfo component */\ninterface IGuildInfoProps {\n    /** The guild to view */\n    guild: GetGuild_guild;\n    /** The refresh function to query a refresh */\n    refetch(): void;\n}\n\n/** The map for the voice chats */\ntype VCMap = Map<ChannelCategory | null, VoiceChannel[]>;\n\n/** The view into the information of the guild */\nfunction GuildInfo({ guild, refetch }: IGuildInfoProps) {\n    const voice_channels: Array<[ChannelCategory | null, VoiceChannel[]]> = useMemo(() =>\n        Array.from(\n            guild.voiceChannels\n                .reduce<VCMap>((map, x) => {\n                    let arr = map.get(x.category);\n                    if (arr === undefined) {\n                        arr = [];\n                    }\n\n                    arr.push(x);\n\n                    map.set(x.category, arr);\n\n                    return map;\n                }, new Map())\n                .entries()\n        )\n            .sort(([a], [b]) =>\n                (a?.position === undefined ? -1 : a.position) - (b?.position === undefined ? -1 : b?.position)\n            ).map(([cat, vcs]) =>\n                [cat, vcs.sort((a, b) => a.position - b.position)]\n            ),\n        [guild.voiceChannels]\n    );\n\n    return (\n        <div>\n            <div>/ <Link to=\"/\">Home</Link> / {guild.name}</div>\n            <button onClick={refetch}>Refresh</button>\n            <table>\n                <thead>\n                    <tr>\n                        <th>Property</th>\n                        <th>Value</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr>\n                        <td>Guild name:</td>\n                        <td>{guild.name}</td>\n                    </tr>\n                    <tr>\n                        <td>Guild id:</td>\n                        <td>{guild.id}</td>\n                    </tr>\n                    <tr>\n                        <td>Guild owner:</td>\n                        <td style={{ color: `#${guild.owner.color === null ? \"000000\" : guild.owner.color.toString(16)}`, fontWeight: \"bold\" }}>{guild.owner.nick === null ? guild.owner.name : guild.owner.nick}#{guild.owner.discriminator}</td>\n                    </tr>\n                    <tr>\n                        <td>Voice categories:</td>\n                        <td>\n                            <table>\n                                <thead>\n                                    <tr>\n                                        <th>Name:</th>\n                                        <th>Position:</th>\n                                        <th>Voice channels:</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {voice_channels.map(([category, vcs], i) => (\n                                        <tr key={i}>\n                                            <td>{category?.name === undefined ? \"No Category\" : category.name}</td>\n                                            <td>{category?.position === undefined ? -1 : category.position}</td>\n                                            <td>\n                                                <table>\n                                                    <thead>\n                                                        <tr>\n                                                            <th>Name</th>\n                                                            <th>Position</th>\n                                                            <th>Can operate</th>\n                                                            <th>User Limit</th>\n                                                            <th>User Count</th>\n                                                            <th>Users</th>\n                                                        </tr>\n                                                    </thead>\n                                                    <tbody>\n                                                        {vcs.map((vc, j) => (\n                                                            <tr key={j}>\n                                                                <td><Link to={`/${guild.id}/${vc.id}`}>{vc.name}</Link></td>\n                                                                <td>{vc.position}</td>\n                                                                <td>{vc.canOperate.toString()}</td>\n                                                                <td>{vc.userLimit}</td>\n                                                                <td>{vc.states.length}</td>\n                                                                <td>{vc.states.map(s => `${s.member.name}#${s.member.discriminator}`).join(\", \")}</td>\n                                                            </tr>\n                                                        ))}\n\n                                                    </tbody>\n                                                </table>\n                                            </td>\n                                        </tr>\n                                    ))}\n                                </tbody>\n                            </table>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>Guild icon:</td>\n                        <td><img src={getGuildIcon(guild)} alt=\"Guild icon\"/></td>\n                    </tr>\n                </tbody>\n            </table>\n        </div >\n    );\n}","import React from \"react\";\nimport { HashRouter as Router, Link, Route, Switch } from \"react-router-dom\";\nimport Channel from \"./routes/Channel\";\nimport Guild from \"./routes/Guild\";\n\n/** The main entry point for the app */\nfunction App() {\n    return (\n        <Router>\n            <div>\n                {/* A <Switch> looks through its children <Route>s and\n            renders the first one that matches the current URL. */}\n                <Switch>\n                    <Route path=\"/:guild_id\" exact={true}>\n                        <Guild />\n                    </Route>\n                    <Route path=\"/:guild_id/:channel_id\" exact={true}>\n                        <Channel />\n                    </Route>\n                    <Route path=\"/\" exact={true}>\n                        <div>\n                            <div>/ Home</div>\n\n                            whats poppin\n\n                            <div>\n                                <input type=\"text\" value={\"708811110928744578\"} />\n                                <Link to={\"/708811110928744578\"}>Go to guild</Link>\n                            </div>\n                        </div>\n                    </Route>\n                    <Route path=\"*\">\n                        <pre>404</pre>\n                    </Route>\n                </Switch>\n            </div>\n        </Router>\n    );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n    onSuccess?: (registration: ServiceWorkerRegistration) => void;\n    onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(\n            process.env.PUBLIC_URL,\n            window.location.href\n        );\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return;\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config);\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        'This web app is being served cache-first by a service ' +\n                        'worker. To learn more, visit https://bit.ly/CRA-PWA'\n                    );\n                });\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config);\n            }\n        });\n    }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then(registration => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing;\n                if (installingWorker == null) {\n                    return;\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === 'installed') {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\n                                'New content is available and will be used when all ' +\n                                'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n                            );\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration);\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log('Content is cached for offline use.');\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration);\n                            }\n                        }\n                    }\n                };\n            };\n        })\n        .catch(error => {\n            console.error('Error during service worker registration:', error);\n        });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl, {\n        headers: { 'Service-Worker': 'script' }\n    })\n        .then(response => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get('content-type');\n            if (\n                response.status === 404 ||\n                (contentType != null && contentType.indexOf('javascript') === -1)\n            ) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then(registration => {\n                    registration.unregister().then(() => {\n                        window.location.reload();\n                    });\n                });\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config);\n            }\n        })\n        .catch(() => {\n            console.log(\n                'No internet connection found. App is running in offline mode.'\n            );\n        });\n}\n\nexport function unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready\n            .then(registration => {\n                registration.unregister();\n            })\n            .catch(error => {\n                console.error(error.message);\n            });\n    }\n}\n","import { createGlobalStyle } from \"styled-components\";\n\n/** The global style for the application */\nexport const GlobalStyle = createGlobalStyle`\n    body {\n        margin: 0;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n            'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n            sans-serif;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n    }\n\n    code {\n        font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\n            monospace;\n    }\n\n    table {\n        border: 2px solid black;\n        width: 100%;\n\n        td {\n            border: 2px solid black;\n            text-align: center;\n        }\n        th {\n            background: black;\n            color: white;\n            text-align: center;\n        }\n    }\n`;","import { ApolloClient, ApolloProvider, InMemoryCache } from \"@apollo/client\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { BACKEND_GRAPHQL_URL } from \"./constants\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { GlobalStyle } from \"./style\";\n\n/** The client to use for apollo */\nconst CLIENT = new ApolloClient({\n    cache: new InMemoryCache(),\n    name: \"stfu\",\n    uri: BACKEND_GRAPHQL_URL\n});\n\nReactDOM.render(\n    <React.StrictMode>\n        <GlobalStyle />\n        <ApolloProvider client={CLIENT}>\n            <App />\n        </ApolloProvider>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}